---
title: "Career Choice and Academic Performance"
author: "Chris Cioffi, Kristina Frazier, Aidan Hennessy, Mike McHenry"
format:
  revealjs:
    theme: "league"
---

## Overview

1)  Introduction and Question
2)  Background and Related Literature
3)  Data
4)  Exploratory Analysis
5)  Modeling
6)  Diagnostic Tools
7)  Remedial Measures
8)  Conclusion

## What Do You Want to Be When You Grow Up?

-   During their high school years, young adults are often asked to make decisions regarding post-secondary education that can have a profound and lasting impact on their lives in the future.

-   We investigate what factors in high school may be related to future academic performance.

-   In particular, we ask: how is college GPA related to thought about prospective career path in high school? How are other characteristics about the students themselves, their background, and their high school enviromental related to their college GPA?

## Literature Review/Background

## Data

-   High School Longitudinal Study of 2009 (HSLS:09) from the National Center for Education Statistics.
    -   Interviewed 9th graders across the United States in 2009.
    -   Followed up with subjects in three subsequent interview rounds.
    -   Offers a variety of information on students, parents, and school.

## Key Variables

-   Response Variable: College GPA

-   Primary Predictor of Interest: Desired occupation at age 30.

    -   A categorical variable with 22 occupation groups.

-   Additional predictors:

    -   Academic: High school GPA, credits earned for AP/IB courses, School engagement, Stem/non-stem desired occupation
    -   Geographic and Socioeconomic Factors: Family Income, High School urbanicity, High School type

## A Look at Desired Occupation

```{r}
#| include: false
library(tidyverse)
library(broom)
load("../Data/HSLS_Data.rdata")
```

```{r}
#| echo: false

# X5GPAALL: Postsecondary Transcript: GPA at all known institutions attended
# X1STU30OCC2: Planned student occupation at age 30



HSLS_Data |>
  filter(
    X5GPAALL >= 0,
    X1STU30OCC2 != "Unit non-response"
  ) |>
  filter(X1STU30OCC2 != "Uncodeable") |>
  filter(X1STU30OCC2 != "Missing") |>
  select(X5GPAALL, X1STU30OCC2) |>
  ggplot(aes(x = X5GPAALL, y = X1STU30OCC2)) +
  geom_boxplot() +
  labs(
    title = "College GPA by Desired Occupation",
    x = "College GPA",
    y = "Desired Occupation"
  ) +
  theme_bw()

# NOTE: Try to sort this by Median GPA
```

## Desired Occupation and Academic Performance

```{r}
#| echo: false

# X3TGPAACAD: GPA for all academic courses

HSLS_Data |>
  filter(
    X5GPAALL >= 0,
    X3TGPAACAD >= 0,
    X1STU30OCC2 != "Unit non-response"
  ) |>
  filter(X1STU30OCC2 != "Uncodeable") |>
  filter(X1STU30OCC2 != "Missing") |>
  select(X5GPAALL, X3TGPAACAD, X1STU30OCC2) |>
  ggplot(aes(x = X3TGPAACAD, y = X5GPAALL, color = X1STU30OCC2)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  theme(legend.position = "none") +
  labs(
    title = "HS GPA vs. College GPA",
    x = "High School GPA",
    y = "College GPA"
  ) +
  theme_bw() +
  theme(legend.position = "none")
```

```{r}
#| echo: false
HSLS_Data |>
  filter(
    X5GPAALL >= 0,
    X3TGPAACAD >= 0,
    X1STU30OCC2 != "Unit non-response"
  ) |>
  filter(X1STU30OCC2 != "Uncodeable") |>
  filter(X1STU30OCC2 != "Missing") |>
  rename(College_GPA = X5GPAALL, HS_GPA = X3TGPAACAD) |>
  select(College_GPA, HS_GPA) |>
  cor()
```



## Model: Simple Linear Regression

-   Set reference group to those students who answered "Don't Know".

-   Model takes the form of $College\_GPA = \beta_0 + \beta_1future\_job + \epsilon$.

## Results: Simple Linear Regression

-   Showing only results with a p-value \< 0.10.

```{r}
#| echo: false
# Build df
SLR_GPA_Job <- HSLS_Data |>
  filter(
    X5GPAALL >= 0,
    X1STU30OCC2 != "Unit non-response"
  ) |>
  filter(X1STU30OCC2 != "Uncodeable") |>
  filter(X1STU30OCC2 != "Missing") |>
  select(X5GPAALL, X1STU30OCC2)

# Set reference group to "Don't know"
SLR_GPA_Job$X1STU30OCC2 <- relevel(SLR_GPA_Job$X1STU30OCC2, ref = "Don't know")

# Regression
SLR_GPA_Job_reg <- lm(X5GPAALL ~ X1STU30OCC2, data = SLR_GPA_Job)
summary(SLR_GPA_Job_reg) |>
  broom::tidy() |>
  filter(p.value <= 0.01) |>
  mutate(term = str_remove(term, "X1STU30OCC2"))

# For the sake of reducing the output, just show results that are significant at alpha = 0.10.
```

-   Adjusted $R^2$ is less than 1%.

## Additional Variables to Add

**(KF going to clean up this slide)**

- X4ENTRYMAJ23: Major considering upon postsecondary entry- 23 categories
- X1LOCALE: School locale (urbanicity)
- X1FAMINCOME # Total family income from all sources 2008 
- X3TCREDAPIB #X3 Credits earned in: AP/IB combined - in Carnegie units 
- X1CONTROL #identifies the base year school as being a Public, Catholic, or Other Private School
- X1SCHOOLBEL: Scale of studentâ€™s sense of school belonging

## Multiple Linear Regression

```{r}
HSLS_Data$X1LOCALE
```


```{r}
#| echo: false

MLR_all <- HSLS_Data |>
  filter(
    X5GPAALL >= 0,
    X3TGPAACAD >= 0,
    X1STU30OCC2 != "Unit non-response",
    X1STU30OCC2 != "Uncodeable",
    X1STU30OCC2 != "Missing",
    X4ENTRYMAJ23 != "Missing",
    X4ENTRYMAJ23 != "Unit non-response",
    X4ENTRYMAJ23 != "Item legitimate skip/NA"
  )


# Reset reference groups
MLR_all$X1STU30OCC2 <- relevel(MLR_all$X1STU30OCC2, ref = "Don't know")
MLR_all$X4ENTRYMAJ23 <- relevel(MLR_all$X4ENTRYMAJ23, ref = "Undeclared/undecided")
```


## Variable Selection

## Diagnostic Tools

## Remedial Measures

## MLR Results

## Slide for Additional Ideas

-   If our model assumptions are violated we could try bootstrapping or quantile regression?
